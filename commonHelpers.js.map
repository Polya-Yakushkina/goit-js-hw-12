{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"44826070-b61a4388daa53572fdb07d9a3\";\nconst imgType = \"photo\";\nconst orientation = \"horizontal\";\nconst safeSearch = \"true\";\nlet currentPage = 1;\n    \nasync function getImages(query) {\n    const request = `${URL}?key=${API_KEY}&q=${query}&image_type=${imgType}&orientation=${orientation}&safesearch=${safeSearch}&per_page=15&page=${currentPage}`;\n    const res = await axios.get(request);\n    const data = res.data;\n    \n    if (data.hits.length === 0) {\n            return { hits: [], totalHits: 0 };\n        }\n        currentPage += 1;\n        return { hits: data.hits, totalHits: data.totalHits };\n}\n\nfunction resetPage() {\n    currentPage = 1;\n}\n\nexport { getImages, resetPage };","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-more');\n\nfunction showGallery(images) {\n    const markup = images.map(image => `\n        <div class=\"gallery-item\">\n           <a href=\"${image.largeImageURL}\">\n              <img class=\"gallery-img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n           </a>\n              <div class=\"img-container\">\n                <div class=\"img-info\">\n                  <p class=\"img-stats\">Likes</p>\n                  <p class=\"img-stats-value\">${image.likes}</p>\n                </div>\n                <div class=\"img-info\">\n                  <p class=\"img-stats\">Views</p>\n                  <p class=\"img-stats-value\">${image.views}</p>\n                </div>\n                <div class=\"img-info\">\n                  <p class=\"img-stats\">Comments</p>\n                  <p class=\"img-stats-value\">${image.comments}</p>\n                </div>\n                <div class=\"img-info\">\n                  <p class=\"img-stats\">Downloads</p>\n                  <p class=\"img-stats-value\">${image.downloads}</p>\n                </div>\n               </div>\n        </div>\n    `).join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n    \n    const lightbox = new SimpleLightbox('.gallery a', {\n        captionDelay: 250,\n        captionsData: 'alt',\n        animationSpeed: 300,\n        fadeSpeed: 300,\n    });\n\n    lightbox.refresh();\n}\n\nfunction toggleLoadBtn(show) {\n    if (show) {\n        loadBtn.classList.remove('hidden');\n    } else {\n        loadBtn.classList.add('hidden');\n    }\n}\n\nexport { showGallery, toggleLoadBtn };","import { getImages, resetPage } from \"./js/pixabay-api\"\nimport { showGallery, toggleLoadBtn } from \"./js/render-functions\"\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.input');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-more');\n\nlet query = '';\n\nasync function errorHandler(fn) {\n    try {\n        await fn();\n    } catch (error) {\n        iziToast.info({\n            title: \"Info\",\n            message: \"Ooops, something went wrong... Try again later.\",\n            position: \"topRight\"\n        });\n    }\n}\n\nform.addEventListener('submit', async event => {\n    event.preventDefault();\n    query = input.value;\n\n    if (query === '') {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Please enter a search query\",\n            position: \"topRight\"\n        });\n        return;\n    }\n\n    resetPage();\n    toggleLoadBtn(false);\n    gallery.innerHTML = '';\n\n    await errorHandler(async () => {\n        await newImages();\n    }).finally(() => {\n        form.reset();\n    });\n});\n\nloadBtn.addEventListener('click', async () => {\n    await errorHandler(async () => {\n        await newImages();\n        const galleryItem = document.querySelector('.gallery-item');\n        if (galleryItem) {\n            const { height } = galleryItem.getBoundingClientRect();\n            window.scrollBy({\n                top: height * 2,\n                behavior: 'smooth'\n            });\n        }\n    });\n});\n\nasync function newImages() {\n    loader.classList.add('visible');\n    try {\n        const { hits, totalHits } = await getImages(query);\n        if (hits.length === 0) {\n            iziToast.error({\n                title: \"Error\",\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topRight\"\n            });\n            toggleLoadBtn(false);\n            return;\n        }\n        \n        showGallery(hits);\n        \n        if (gallery.children.length < totalHits) {\n            toggleLoadBtn(true);\n        } else {\n            toggleLoadBtn(false);\n            iziToast.info({\n                title: \"Info\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\"\n            });\n        }\n    } catch (error) {\n        iziToast.info({\n            title: \"Info\",\n            message: \"Ooops, something went wrong... Try again later.\",\n            position: \"topRight\"\n        });\n    } finally {\n        loader.classList.remove('visible');\n    }\n}"],"names":["URL","API_KEY","imgType","orientation","safeSearch","currentPage","getImages","query","request","data","axios","resetPage","gallery","loadBtn","showGallery","images","markup","image","SimpleLightbox","toggleLoadBtn","show","form","input","loader","errorHandler","fn","iziToast","event","newImages","galleryItem","height","hits","totalHits"],"mappings":"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"}